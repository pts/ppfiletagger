README for rmtimeup
"""""""""""""""""""
rmtimeup is a Linux i386 (x86) 32-bit kernel module which updates the
mtime of all ancestor directories for all interesting file operations:
rename, unlink, link, setxattr on files. To do this, it hooks some kernel
functions (e.g. vfs_rename, vfs_link). rmtimeup can be used
as a component of a local filesystem indexing framework (similar to Beagle,
rlocate and movemetafs).

TODO: write this README

System requirements
~~~~~~~~~~~~~~~~~~~
rmtimeup needs:

* A Linux system running kernel 2.6 on i386 (x86) 32-bit architecture.
  Other architectures, including 64-bit (x86-64, amd64, ia64) are not
  supported. uname -a should print Linux, 2.6.*, i[3456]86, but not x86_64.
* Kernel loadable module support (LKM, CONFIG_MODULES=y).

What could be done with a kernel patch
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It would be possible to prepare a kernel patch, which would relax the
system requirements:

* Any architecture instead of 32-bit i386.
* No disassembler.

Please contact me if you really need that kernel patch (I haven't written it
yet).

How to compile and load
~~~~~~~~~~~~~~~~~~~~~~~
To compile and load rmtimeup, run these commands:

  $ sudo apt-get install gcc make linux-kernel-headers
  $ ls -l rmtimeup.txt mainmod.c ud.c
  $ make
  $ sudo insmod ./rmtimeup.ko 

If `make' gives you error messages like

  warning: initialization from incomatible pointer type

(such as with the Ubuntu Hardy 2.6.24-22-generic kernel), try this:

  $ USE_EXTRA_VFSMNT=1 make

Please not that Makefile has auto-detection for USE_EXTRA_VFSMNT built in
so this should no longer be an issue.

TODO: how to install permanently

Copyright
~~~~~~~~~
rmtimeup is written and copyright by Peter Szabo <pts@fazekas.hu> from January
2009.

rmtimeup is free software under the GNU GPL v2.

Acknowledgements
~~~~~~~~~~~~~~~~
Part of the code of rmtimeup is based on rfsdelta 0.08 by Peter Szabo, which
is based on rlocate.c (of rlocate 0.5.5) by Rasto Levrinc, which takes some
code from Peter Robinson (http://www.logic.at/staff/robinson/).

rfsdelta contains valuable improvements from Andress Blomdell.

rmtimeup contains a modified copy of udis86 1.7, 
